#!/bin/bash


if [ -z "$1" ] ; then
    echo "Usage: $0 <script to run> <arg1> ..." >&2
    exit 1
fi

set -a

SLURMD_NODENAME=mpp3r02c01s05

SLURM_STEP_NODELIST=mpp3r02c01s05
SLURM_STEPID=165
SLURM_STEP_ID=165
SLURM_JOBID=409506
SLURM_JOB_ID=409506
SLURM_JOB_UID=3942384
SLURM_NTASKS=1
SLURM_NNODES=1
SLURM_STEP_NUM_NODES=1
SLURM_NODEID=0
SLURM_TASKS_PER_NODE=1
SLURM_CPUS_PER_TASK=1
SLURM_STEP_NUM_TASKS=1
SLURM_JOB_USER=user
SLURM_CLUSTER_NAME=mpp3
SLURM_NODELIST=mpp3r02c01s[04-05],mpp3r02c02s[01,03]
SLURM_CHECKPOINT_IMAGE_DIR=/var/slurm/checkpoint
SLURM_JOB_NAME=testrun5
SLURM_TOPOLOGY_ADDR=coreswitch.switch02.mpp3r02c01s05
SLURM_PRIO_PROCESS=0
SLURM_SRUN_COMM_PORT=39281
SLURM_EXPORT_ENV=NONE
SLURM_JOB_QOS=normal
TMPDIR=/tmp
SLURM_TOPOLOGY_ADDR_PATTERN=switch.switch.node
SLURM_CPU_BIND_VERBOSE=quiet
SLURM_CPU_BIND_LIST=0x0000020000000000000002000000000000000200000000000000020000000000
SLURM_LAUNCH_NODE_IPADDR=10.156.64.167
SLURM_STEP_LAUNCHER_PORT=39281
SLURM_SRUN_COMM_HOST=10.156.64.167
SLURM_CPU_BIND_TYPE=mask_cpu:
SLURM_UMASK=0022
SLURM_SUBMIT_DIR=/home/hpc/pr74ze/di25pic2
SLURM_NPROCS=1
SLURM_TASK_PID=146904
SLURM_DISTRIBUTION=cyclic
SLURM_CPUS_ON_NODE=4
SLURM_PROCID=0
SLURM_JOB_NODELIST=mpp3r02c01s[04-05],mpp3r02c02s[01,03]
SHLVL=1
SLURM_GET_USER_ENV=1
SLURM_LOCALID=0
SLURM_JOB_CPUS_PER_NODE=256(x4)
SLURM_JOB_GID=3647528
SLURM_SUBMIT_HOST=mpp3r02c01s04
SLURM_GTIDS=0
SLURM_JOB_PARTITION=mpp3_batch
SLURM_JOB_ACCOUNT=users
SLURM_JOB_NUM_NODES=4
SLURM_STEP_TASKS_PER_NODE=1
SLURM_CPU_BIND=quiet,mask_cpu:0x0000020000000000000002000000000000000200000000000000020000000000
SLURM_MEM_PER_NODE=92000

"$@"
